<!doctype html>
<html lang="es" dir="ltr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<meta name="theme-color" content="#0b0f16" />
<title>Invitaci√≥n para Dayana ‚Äî El Conjuro 4</title>
<meta name="description" content="Dayana, quiero invitarte al estreno de El Conjuro 4. ¬øVamos al cine?" />
<link rel="canonical" href="https://tudominio.ejemplo/invitacion" />

<!-- Social / SEO -->
<meta property="og:type" content="website" />
<meta property="og:title" content="Invitaci√≥n para Dayana ‚Äî El Conjuro 4" />
<meta property="og:description" content="Dayana, quiero invitarte al estreno de El Conjuro 4. ¬øVamos al cine?" />
<meta property="og:image" content="img/conjuro4.jpg" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Invitaci√≥n para Dayana ‚Äî El Conjuro 4" />
<meta name="twitter:description" content="Dayana, quiero invitarte al estreno de El Conjuro 4. ¬øVamos al cine?" />
<meta name="twitter:image" content="img/conjuro4.jpg" />

<!-- Preload de la imagen hero (mejor LCP) -->
<link rel="preload" as="image" href="img/conjuro4.jpg" imagesrcset="img/conjuro4.jpg 1200w" imagesizes="100vw" />

<style>
  :root{
    --bg:#0b0f16; --ink:#e9eef7; --muted:#b7c0d8;
    --accent:#ff4d5b; --accent2:#b083ff; --border:#22304b;
    --glass: rgba(255,255,255,.06); --radius:22px; --maxw:1120px;
    --focus: 0 0 0 3px rgba(255,77,91,.5);
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0}
  body{
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, Cantarell, Arial;
    color:var(--ink);
    background: radial-gradient(1100px 600px at 80% -10%, #18233f 0%, var(--bg) 55%), var(--bg);
    line-height:1.7; -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    overflow-x:hidden;
  }
  .container{max-width:var(--maxw);margin:0 auto;padding:clamp(16px,2.8vw,34px)}
  a{color:inherit}
  :focus-visible{outline:none; box-shadow:var(--focus); border-radius:12px}
  .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

  /* NAV */
  .nav{display:flex;align-items:center;justify-content:space-between;gap:12px;
       background:rgba(255,255,255,.03); border:1px solid var(--border); border-radius:14px;
       padding:12px 16px; backdrop-filter: blur(6px);}
  .brand{font-weight:700;text-decoration:none;color:var(--ink); white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .nav small{color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis}

  /* HERO */
  .hero{position:relative;overflow:hidden;border-radius:var(--radius); border:1px solid var(--border);
        margin-top:20px; min-height:78vh; display:flex; align-items:flex-end; isolation:isolate;}
  .hero::before{
    content:""; position:absolute; inset:-3% -3%; z-index:-2;
    background:url("img/conjuro4.jpg") center/cover no-repeat #000;
    animation: kenburns 26s ease-in-out infinite alternate;
    transform-origin: 60% 50%; filter:saturate(1.05) brightness(.78) contrast(1.05);
  }
  @keyframes kenburns{ from{transform:scale(1)} to{transform:scale(1.12)} }
  .vignette{position:absolute; inset:0; z-index:-1;
    background:
      radial-gradient(1200px 600px at 12% 45%, rgba(0,0,0,.55), transparent 60%),
      linear-gradient(90deg, rgba(7,10,18,.96) 0%, rgba(7,10,18,.85) 42%, rgba(7,10,18,.45) 70%, rgba(7,10,18,.15) 100%);
    backdrop-filter: blur(2.5px);
  }
  .hero-inner{padding:clamp(18px,4.2vw,46px); width:min(880px,96%)}
  h1{margin:0 0 12px; font-size:clamp(1.9rem,6.2vw,3.6rem); line-height:1.12; letter-spacing:.3px}
  .grad{background:linear-gradient(90deg,var(--accent),var(--accent2)); -webkit-background-clip:text; background-clip:text; color:transparent}
  .tagline{color:var(--muted); margin:0 0 18px}
  .glass{background:var(--glass); border:1px solid rgba(255,255,255,.1); border-radius:16px; padding:14px 16px; backdrop-filter: blur(8px)}
  .cta{margin-top:18px; display:flex; gap:12px; flex-wrap:wrap}
  .btn{display:inline-block; padding:14px 18px; border-radius:14px; font-weight:700; text-decoration:none; color:#fff; background:var(--accent);
       box-shadow:0 10px 28px rgba(255,77,91,.22); transition:transform .18s ease}
  @media (hover:hover){ .btn:hover{transform: translateY(-2px) scale(1.01)}}
  .btn.ghost{background:transparent; color:var(--ink); border:1px solid #2b3552}

  /* FIRELIES CANVAS */
  #fx{position:fixed; inset:0; pointer-events:none; z-index:999; }

  main{margin-top:clamp(22px,3.5vw,42px)}
  section + section{margin-top:clamp(24px,4vw,52px)}
  h2{margin:0 0 16px; font-size:clamp(1.35rem,3.2vw,1.9rem)}
  .card{background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,0));
        border:1px solid var(--border); border-radius:var(--radius); padding:clamp(16px,2.4vw,30px)}

  /* INFO GRID */
  .grid{display:grid; gap:16px; grid-template-columns: repeat(3,1fr)}
  .tile{position:relative; border:1px solid var(--border); border-radius:16px; overflow:hidden; background:#0f1524}
  .tile::before{content:""; position:absolute; inset:0; background:linear-gradient(180deg, rgba(255,255,255,.06), transparent)}
  .tile .content{position:relative; padding:16px}
  .tile{transition:transform .18s ease}
  @media (hover:hover){ .tile:hover{transform: translateY(-2px)}}

  /* COUNTDOWN */
  .count{display:grid; gap:10px; grid-template-columns: repeat(4, minmax(80px,1fr))}
  .box{ text-align:center; background:#0f1a2a; border:1px solid var(--border); border-radius:12px; padding:12px}
  .num{font-size:1.6rem; font-weight:800}

  /* CAROUSEL (scroll-snap) */
  .snapwrap{overflow:auto; scroll-snap-type:x mandatory; display:flex; gap:12px; padding-bottom:6px; -webkit-overflow-scrolling: touch}
  .snap{flex: 0 0 84%; max-width:840px; aspect-ratio: 16/9; border-radius:16px; border:1px solid var(--border); overflow:hidden; scroll-snap-align:center; background:#000}
  .snap img{width:100%;height:100%;object-fit:cover; display:block}
  .snapwrap::-webkit-scrollbar{height:10px} .snapwrap::-webkit-scrollbar-thumb{background:#2a3754; border-radius:999px}

  .waiting{margin-top:26px; text-align:center; font-size:1.08rem; color:#ffdbe1}
  .footer{text-align:center; padding:40px 16px 64px; color:#b7c0d8}

  /* Reveal on scroll + rendimiento */
  .reveal{opacity:0; transform:translateY(14px); transition:.7s ease; content-visibility:auto; contain-intrinsic-size: 1px 400px}
  .reveal.visible{opacity:1; transform:none}

  /* Coraz√≥n */
  .heart-section{text-align:center; margin-top:40px}
  #heartCanvas{max-width:100%; height:auto; display:block; margin:0 auto}

  /* Accesibilidad: skip */
  .skip-link{position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;}
  .skip-link:focus{position:fixed; left:16px; top:16px; width:auto; height:auto; padding:10px 14px; background:#14203a; color:#fff; border:1px solid var(--border); border-radius:10px; z-index:1000}

  /* MOBILE */
  @media (max-width: 900px){ .grid{grid-template-columns: 1fr 1fr} }
  @media (max-width: 640px){
    .nav{padding:10px 12px}
    .hero{min-height:72vh}
    .hero::before{animation:none;}
    .tagline{font-size:0.95rem}
    .btn{width:100%; text-align:center}
    .count{grid-template-columns: repeat(2, minmax(100px,1fr))}
    .grid{grid-template-columns:1fr}
    .snap{flex:0 0 92%}
  }
  @supports (padding: max(0px)) {
    .container { padding-left: max(16px, env(safe-area-inset-left));
                 padding-right: max(16px, env(safe-area-inset-right)); }
  }
  @media (prefers-reduced-motion: reduce){
    *{animation: none !important; transition: none !important}
    .hero::before{animation:none}
  }
  @media print{
    .hero::before, #fx { display:none !important }
    .btn, .snapwrap { display:none }
    body{background:#fff; color:#000}
    .container{max-width:840px}
  }

  /* ====== SALA DE CINE (pantalla + asientos) ====== */
.theater{
  margin: clamp(18px,3vw,26px) 0 4px;
  display:flex; flex-direction:column; align-items:center; gap:18px;
}
.screen{
  width:min(92%, 560px); height:10px; border-radius:999px;
  background: linear-gradient(90deg, rgba(255,255,255,.35), rgba(255,255,255,.12), rgba(255,255,255,.35));
  filter: blur(.2px); position:relative;
}
.screen::after{
  content:""; position:absolute; inset:-40px -8%; z-index:-1; border-radius:18px;
  background: radial-gradient(60% 100% at 50% -10%, rgba(255,255,255,.16), transparent 70%);
  pointer-events:none;
}
.cinema{
  display:grid; gap:8px 8px; justify-content:center;
  grid-template-columns: repeat(10, 26px);
  transform: perspective(600px) rotateX(18deg);
  transform-origin: center top;
  user-select:none;
}
.row-label{
  grid-column: 1 / -1; text-align:center; color:var(--muted); font-size:.78rem; opacity:.9;
  transform: translateY(-2px);
}
.seat{
  width:26px; height:26px; border-radius:6px 6px 3px 3px;
  background:#2b3552; box-shadow: inset 0 -2px 0 rgba(0,0,0,.35);
  cursor:pointer; transition: transform .28s ease, box-shadow .28s ease, background .28s ease;
  position:relative;
}
.seat::before{ /* respaldo */
  content:""; position:absolute; left:3px; right:3px; top:-5px; height:8px; border-radius:5px 5px 0 0;
  background:#2a3149; box-shadow: inset 0 -2px 0 rgba(0,0,0,.35);
}
.seat.selected{
  background: var(--accent);
  box-shadow: 0 0 12px rgba(255,77,91,.7), inset 0 -2px 0 rgba(0,0,0,.35);
  transform: translateY(-2px) scale(1.06);
}
.seat:hover{ background: var(--accent2) }
.seat.animate{ animation: pick .6s ease forwards }
@keyframes pick{
  0%{transform: translateY(6px) scale(.6); opacity:0}
  80%{transform: translateY(-2px) scale(1.08); opacity:1}
  100%{transform: translateY(-2px) scale(1.06); opacity:1}
}
.legend{
  display:flex; gap:12px; align-items:center; color:var(--muted); font-size:.85rem; opacity:.9;
}
.legend .dot{
  width:14px;height:14px;border-radius:4px;display:inline-block;background:#2b3552;
  box-shadow: inset 0 -2px 0 rgba(0,0,0,.35);
}
.legend .dot.sel{ background: var(--accent); box-shadow: 0 0 8px rgba(255,77,91,.7) }
.legend .dot.hov{ background: var(--accent2) }

@media (max-width:640px){
  .cinema{grid-template-columns: repeat(8, 26px)}
}
</style>
</head>
<body>
  <a href="#main" class="skip-link">Saltar al contenido</a>

  <!-- Canvas de velitas -->
  <canvas id="fx" aria-hidden="true"></canvas>

  <header class="container" role="banner">
    <nav class="nav" aria-label="Principal">
      <a class="brand" href="#">üé¨ Nuestra cita</a>
      <small>El Conjuro 4 ‚Äî Last Rites</small>
    </nav>

    <section class="hero" aria-labelledby="hero-title" role="region">
      <span class="vignette" aria-hidden="true"></span>
      <div class="hero-inner">
       <h1 id="hero-title">
          <span id="nombreInvitado"></span>, ¬øquisieras ir conmigo a ver 
          <span class="grad">El Conjuro 4</span>? üòâ
      </h1>

        <p class="tagline"><strong>Estreno:</strong> viernes 5 de septiembre de 2025</p>
        <div class="glass" role="note">
         Tal vez no sea mucho. 
         Quiero que sepas que me gustas de verdad, y con este peque√±o detalle solo busco recordarte 
         lo especial que eres para m√≠‚Ä¶ y de paso tener una excusa m√°s para estar cerquita de ti.
        </div>
        <div class="cta" role="group" aria-label="Acciones principales">
          <a class="btn" href="#detalles">Ver plan</a>
          <button class="btn fx-toggle" id="toggleFX" type="button" aria-pressed="false">Encender velitas ‚ú®</button>
          <a class="btn ghost" href="#galeria">Ver galer√≠a</a>
                  <a class="btn ghost" id="trailer" href="https://www.youtube.com/watch?v=bMgfsdYoEEo" target="_blank" rel="noopener">Ver tr√°iler</a>
        </div>
      </div>
    </section>
  </header>

  <main id="main" class="container" role="main">
    <!-- Sala de cine -->
    <section class="reveal" aria-labelledby="sala-cine">
      <h2 id="sala-cine">Elige tu asiento üéüÔ∏è</h2>
      <div class="card">
        <div class="theater" aria-label="Sala de cine">
          <div class="screen" aria-hidden="true"></div>

          <div class="cinema" id="cinema" role="grid" aria-label="Mapa de asientos">
            <!-- Fila A -->
            <span class="row-label" aria-hidden="true">Fila A</span>
            <!-- 10 asientos por fila -->
            <div class="seat" role="gridcell" aria-label="A1"></div><div class="seat" role="gridcell" aria-label="A2"></div><div class="seat" role="gridcell" aria-label="A3"></div><div class="seat" role="gridcell" aria-label="A4"></div><div class="seat" role="gridcell" aria-label="A5"></div><div class="seat" role="gridcell" aria-label="A6"></div><div class="seat" role="gridcell" aria-label="A7"></div><div class="seat" role="gridcell" aria-label="A8"></div><div class="seat" role="gridcell" aria-label="A9"></div><div class="seat" role="gridcell" aria-label="A10"></div>

            <!-- Fila B -->
            <span class="row-label" aria-hidden="true">Fila B</span>
            <div class="seat" role="gridcell" aria-label="B1"></div><div class="seat" role="gridcell" aria-label="B2"></div><div class="seat" role="gridcell" aria-label="B3"></div><div class="seat" role="gridcell" aria-label="B4"></div><div class="seat" role="gridcell" aria-label="B5"></div><div class="seat" role="gridcell" aria-label="B6"></div><div class="seat" role="gridcell" aria-label="B7"></div><div class="seat" role="gridcell" aria-label="B8"></div><div class="seat" role="gridcell" aria-label="B9"></div><div class="seat" role="gridcell" aria-label="B10"></div>

            <!-- Fila C -->
            <span class="row-label" aria-hidden="true">Fila C</span>
            <div class="seat" role="gridcell" aria-label="C1"></div><div class="seat" role="gridcell" aria-label="C2"></div><div class="seat" role="gridcell" aria-label="C3"></div><div class="seat" role="gridcell" aria-label="C4"></div><div class="seat" role="gridcell" aria-label="C5"></div><div class="seat" role="gridcell" aria-label="C6"></div><div class="seat" role="gridcell" aria-label="C7"></div><div class="seat" role="gridcell" aria-label="C8"></div><div class="seat" role="gridcell" aria-label="C9"></div><div class="seat" role="gridcell" aria-label="C10"></div>

            <!-- Fila D -->
            <span class="row-label" aria-hidden="true">Fila D</span>
            <div class="seat" role="gridcell" aria-label="D1"></div><div class="seat" role="gridcell" aria-label="D2"></div><div class="seat" role="gridcell" aria-label="D3"></div><div class="seat" role="gridcell" aria-label="D4"></div><div class="seat" role="gridcell" aria-label="D5"></div><div class="seat" role="gridcell" aria-label="D6"></div><div class="seat" role="gridcell" aria-label="D7"></div><div class="seat" role="gridcell" aria-label="D8"></div><div class="seat" role="gridcell" aria-label="D9"></div><div class="seat" role="gridcell" aria-label="D10"></div>
          </div>
          <br>
          <div class="legend" aria-hidden="true">
            <span class="dot"></span> Libre
            <span class="dot hov"></span> Hover
            <span class="dot sel"></span> Seleccionado
          </div>
        </div>
      </div>
    </section>
    <!-- Countdown -->
    <section class="reveal" aria-labelledby="faltan">
      <h2 id="faltan">Faltan‚Ä¶</h2>
      <div class="card" aria-live="polite">
        <div class="count">
          <div class="box"><div class="num" id="d" aria-label="d√≠as">0</div>d√≠as</div>
          <div class="box"><div class="num" id="h" aria-label="horas">0</div>horas</div>
          <div class="box"><div class="num" id="m" aria-label="minutos">0</div>min</div>
          <div class="box"><div class="num" id="s" aria-label="segundos">0</div>seg</div>
        </div>
      </div>
    </section>

    <!-- Plan -->
    <section id="detalles" class="reveal" aria-labelledby="plan">
      <h2 id="plan">El plan</h2>
      <div class="grid">
      <article class="tile">
  <div class="content">
    <h3 style="margin:0 0 8px">üéüÔ∏è La peli</h3>
    <p style="margin:0;color:var(--muted)">
      The Conjuring: Last Rites (El Conjuro 4). Yo me encargo de las entradas para que t√∫ solo disfrutes conmigo üòâ‚ù§Ô∏è.
    </p>
  </div>
</article>

<article class="tile">
  <div class="content">
    <h3 style="margin:0 0 8px">üç´ Despu√©s</h3>
    <p style="margin:0;color:var(--muted)">
      Algo dulce, un caf√©, o lo que se te antoje‚Ä¶ lo importante es compartirlo contigo üòè‚ú®.
    </p>
  </div>
</article>

<article class="tile">
  <div class="content">
    <h3 style="margin:0 0 8px">üìç Seg√∫n el d√≠a</h3>
    <p style="margin:0;color:var(--muted)">
      Yo preparo la sorpresa, t√∫ solo rel√°jate‚Ä¶ que el plan est√° en buenas manos üíï.
    </p>
  </div>
</article>
      </div>
    </section>

    <!-- Galer√≠a -->
    <section id="galeria" class="reveal" aria-labelledby="galeria-title">
      <h2 id="galeria-title">Un vistazo</h2>
      <div class="snapwrap" role="list" aria-label="galer√≠a">
        <div class="snap" role="listitem"><img src="img/conjuro4.jpg" alt="P√≥ster de El Conjuro 4" loading="lazy" /></div>
        <div class="snap" role="listitem"><img src="img/el-conjuro-4-trailer-1200x900.jpg" alt="Fotograma oscuro del tr√°iler" loading="lazy" /></div>
        <div class="snap" role="listitem"><img src="img/El-Conjuro-4.jpg" alt="Arte promocional de la pel√≠cula" loading="lazy" /></div>
      </div>
    </section>

    <div class="waiting reveal">
      Ojal√° te guste la idea tanto como a m√≠ üíå. ü§∑‚Äç‚ôÇÔ∏è Es la primera vez que hago algo as√≠‚Ä¶ no s√© si sali√≥ bien, pero prometo que la intenci√≥n estuvo al 100% üòÖ.<br>
      <small>Pd: ser√° lindo si aceptas</small><br><br>
      <a class="btn" 
        href="https://wa.me/593985238081?text=Hola!%20Vi%20tu%20invitaci√≥n" 
        target="_blank" 
        rel="noopener">
        üí¨ Responder por WhatsApp
      </a>
       <br><br>
  
      <a class="btn ghost" href="index.html">
        ‚¨ÖÔ∏è Volver al inicio
      </a>
    </div>

  </main>

  <footer class="container footer" role="contentinfo">
    <small>¬© <span id="year"></span> Hecho con mucho cari√±o. Sitio fan no oficial.</small>
  </footer>

<script>
  // Utilidades
  const $ = (sel, root=document) => root.querySelector(sel);
  const $$ = (sel, root=document) => [...root.querySelectorAll(sel)];
  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  // A√±o
  $('#year').textContent = new Date().getFullYear();

  // Insertar nombre (Dayana por defecto si no viene del welcome)
  const nombre = (localStorage.getItem('invitado') || 'Dayana').trim();
  $('#nombreInvitado').textContent = nombre;

  // Actualizar din√°micamente meta/SEO visibles para el usuario (no todos los crawlers ejecutan JS)
  document.title = `Invitaci√≥n para ${nombre} ‚Äî El Conjuro 4`;
  const setMeta = (sel, val) => { const m = $(sel); if(m) m.setAttribute('content', val); };
  setMeta('meta[name="description"]', `${nombre}, quiero invitarte al estreno de El Conjuro 4. ¬øVamos al cine?`);
  setMeta('meta[property="og:title"]', `Invitaci√≥n para ${nombre} ‚Äî El Conjuro 4`);
  setMeta('meta[name="twitter:title"]', `Invitaci√≥n para ${nombre} ‚Äî El Conjuro 4`);
  setMeta('meta[property="og:description"]', `${nombre}, quiero invitarte al estreno de El Conjuro 4. ¬øVamos al cine?`);
  setMeta('meta[name="twitter:description"]', `${nombre}, quiero invitarte al estreno de El Conjuro 4. ¬øVamos al cine?`);

  // Reveal on scroll
  const obs = new IntersectionObserver((es)=> es.forEach(e=>{
    if(e.isIntersecting){ e.target.classList.add('visible'); obs.unobserve(e.target); }
  }), {threshold:.15});
  $$('.reveal').forEach(el=>obs.observe(el));

  // ========= Countdown (fecha en Guayaquil, UTC-05:00) =========
  const targetLocal = new Date('2025-09-05T19:30:00-05:00'); // -05 fijo
  const target = new Date(targetLocal.toUTCString());
  const $d = $('#d'), $h = $('#h'), $m = $('#m'), $s = $('#s');
  function tick(){
    const now = new Date();
    let diff = Math.max(0, target - now);
    const d = Math.floor(diff/86400000); diff -= d*86400000;
    const h = Math.floor(diff/3600000);  diff -= h*3600000;
    const m = Math.floor(diff/60000);    diff -= m*60000;
    const s = Math.floor(diff/1000);
    $d.textContent=d; $h.textContent=h; $m.textContent=m; $s.textContent=s;
  }
  tick(); const timerId = setInterval(tick, 1000);

  // ========= Velitas (fireflies) con pausa real =========
  const fx = $('#fx');
  const fctx = fx.getContext('2d');
  let W=0,H=0, on=false, bugs=[];
  let rafId = 0, dpr = Math.min(2, window.devicePixelRatio || 1);

  function resize(){
    W = fx.width  = Math.floor(innerWidth  * dpr);
    H = fx.height = Math.floor(innerHeight * dpr);
    fx.style.width = innerWidth + 'px';
    fx.style.height = innerHeight + 'px';
  }
  addEventListener('resize', resize, {passive:true}); resize();

  function spawn(n){
    for(let i=0;i<n;i++){
      bugs.push({
        x: Math.random()*W,
        y: Math.random()*H*.6+H*.2,
        vx: (Math.random()-.5)*.2,
        vy: (Math.random()-.5)*.2,
        r: (Math.random()*2+1)*dpr,
        a: Math.random()*Math.PI*2
      });
    }
  }

  function frame(){
    fctx.clearRect(0,0,W,H);
    for(const b of bugs){
      b.a += 0.02;
      b.vx += Math.cos(b.a)*0.02;
      b.vy += Math.sin(b.a)*0.02;
      b.x += b.vx; b.y += b.vy;
      if(b.x<0||b.x>W) b.vx*=-1;
      if(b.y<0||b.y>H) b.vy*=-1;
      const g = fctx.createRadialGradient(b.x,b.y,0,b.x,b.y,b.r*6);
      g.addColorStop(0,'rgba(255,220,150,.9)');
      g.addColorStop(1,'rgba(255,220,150,0)');
      fctx.fillStyle=g; fctx.beginPath(); fctx.arc(b.x,b.y,b.r,0,Math.PI*2); fctx.fill();
    }
    rafId = on ? requestAnimationFrame(frame) : 0;
  }

  const btnFX = $('#toggleFX');
  btnFX.addEventListener('click', ()=>{
    const canAnimate = !prefersReduced;
    if(!on && canAnimate){
      on = true; btnFX.setAttribute('aria-pressed','true'); btnFX.textContent = 'Apagar velitas ‚ú®';
      if(bugs.length===0) spawn(80);
      if(!rafId) rafId = requestAnimationFrame(frame);
    }else{
      on = false; btnFX.setAttribute('aria-pressed','false'); btnFX.textContent = 'Encender velitas ‚ú®';
      if(rafId){ cancelAnimationFrame(rafId); rafId = 0; }
      fctx.clearRect(0,0,W,H);
    }
  });

  // ========= Mejora de rendimiento para usuarios con reduce-motion =========
  if(prefersReduced){
    if(rafId){ cancelAnimationFrame(rafId); rafId = 0; }
  }

  // ====== Animaci√≥n e interacci√≥n de asientos ======
const cinema = document.getElementById('cinema');
if (cinema) {
  const seats = [...cinema.querySelectorAll('.seat')];

  // Animaci√≥n secuencial al entrar (si no se prefiere reducir movimiento)
  if (!prefersReduced) {
    seats.forEach((seat, i) => {
      setTimeout(() => {
        seat.classList.add('animate','selected');
      }, 110 * i);
    });
    // "Desocupa" algunos para simular disponibilidad
    setTimeout(() => {
      seats.forEach((s, idx) => { if (idx % 3 === 0) s.classList.remove('selected'); });
    }, 110 * seats.length + 500);
  }

  // Click para seleccionar/deseleccionar
  seats.forEach(seat => {
    seat.addEventListener('click', () => {
      const already = seat.classList.contains('selected');
      // Si quieres permitir solo 1 seleccionado a la vez, descomenta:
      // seats.forEach(s => s.classList.remove('selected'));
      seat.classList.toggle('selected', !already);
    });
  });
}
</script>

<noscript>
  <style>.reveal{opacity:1 !important; transform:none !important}</style>
  <div class="container" role="note">Para ver la cuenta regresiva y animaciones, habilita JavaScript.</div>
</noscript>
</body>
</html>
