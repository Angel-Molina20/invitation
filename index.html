<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<meta name="theme-color" content="#0b0f16" />
<title>Invitaci√≥n ‚Äî El Conjuro 4</title>
<meta name="description" content="Quiero invitarte al estreno de El Conjuro 4. ¬øVamos al cine?" />

<style>
  :root{
    --bg:#0b0f16; --ink:#e9eef7; --muted:#b7c0d8;
    --accent:#ff4d5b; --accent2:#b083ff; --border:#22304b;
    --glass: rgba(255,255,255,.06); --radius:22px; --maxw:1120px;
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0}
  body{
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, Cantarell, Arial;
    color:var(--ink);
    background: radial-gradient(1100px 600px at 80% -10%, #18233f 0%, var(--bg) 55%), var(--bg);
    line-height:1.7; -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    overflow-x:hidden;
  }
  .container{max-width:var(--maxw);margin:0 auto;padding:clamp(16px,2.8vw,34px)}

  /* NAV */
  .nav{display:flex;align-items:center;justify-content:space-between;gap:12px;
       background:rgba(255,255,255,.03); border:1px solid var(--border); border-radius:14px;
       padding:12px 16px; backdrop-filter: blur(6px);}
  .brand{font-weight:700;text-decoration:none;color:var(--ink); white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .nav small{color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis}

  /* HERO */
  .hero{position:relative;overflow:hidden;border-radius:var(--radius); border:1px solid var(--border);
        margin-top:20px; min-height:78vh; display:flex; align-items:flex-end; isolation:isolate;}
  .hero::before{
    content:""; position:absolute; inset:-3% -3%; z-index:-2;
    background:url("img/conjuro4.jpg") center/cover no-repeat #000;
    animation: kenburns 26s ease-in-out infinite alternate;
    transform-origin: 60% 50%; filter:saturate(1.05) brightness(.78) contrast(1.05);
  }
  @keyframes kenburns{ from{transform:scale(1)} to{transform:scale(1.12)} }
  .vignette{position:absolute; inset:0; z-index:-1;
    background:
      radial-gradient(1200px 600px at 12% 45%, rgba(0,0,0,.55), transparent 60%),
      linear-gradient(90deg, rgba(7,10,18,.96) 0%, rgba(7,10,18,.85) 42%, rgba(7,10,18,.45) 70%, rgba(7,10,18,.15) 100%);
    backdrop-filter: blur(2.5px);
  }
  .hero-inner{padding:clamp(18px,4.2vw,46px); width:min(880px,96%)}
  h1{margin:0 0 12px; font-size:clamp(1.9rem,6.2vw,3.6rem); line-height:1.12; letter-spacing:.3px}
  .grad{background:linear-gradient(90deg,var(--accent),var(--accent2)); -webkit-background-clip:text; background-clip:text; color:transparent}
  .tagline{color:var(--muted); margin:0 0 18px}
  .glass{background:var(--glass); border:1px solid rgba(255,255,255,.1); border-radius:16px; padding:14px 16px; backdrop-filter: blur(8px)}
  .cta{margin-top:18px; display:flex; gap:12px; flex-wrap:wrap}
  .btn{display:inline-block; padding:14px 18px; border-radius:14px; font-weight:700; text-decoration:none; color:#fff; background:var(--accent);
       box-shadow:0 10px 28px rgba(255,77,91,.22); transition:.2s transform}
  .btn:hover{transform: translateY(-2px) scale(1.01)}
  .btn.ghost{background:transparent; color:var(--ink); border:1px solid #2b3552}

  /* FIRELIES CANVAS */
  #fx{position:fixed; inset:0; pointer-events:none; z-index:999; }
  .fx-toggle{background:transparent; color:var(--ink); border:1px solid #2b3552}

  main{margin-top:clamp(22px,3.5vw,42px)}
  section + section{margin-top:clamp(24px,4vw,52px)}
  h2{margin:0 0 16px; font-size:clamp(1.35rem,3.2vw,1.9rem)}
  .card{background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,0));
        border:1px solid var(--border); border-radius:var(--radius); padding:clamp(16px,2.4vw,30px)}

  /* INFO GRID */
  .grid{display:grid; gap:16px; grid-template-columns: repeat(3,1fr)}
  .tile{position:relative; border:1px solid var(--border); border-radius:16px; overflow:hidden; background:#0f1524}
  .tile::before{content:""; position:absolute; inset:0; background:linear-gradient(180deg, rgba(255,255,255,.06), transparent)}
  .tile .content{position:relative; padding:16px}
  .tile:hover{transform: translateY(-2px); transition:.2s}

  /* COUNTDOWN */
  .count{display:grid; gap:10px; grid-template-columns: repeat(4, minmax(80px,1fr))}
  .box{ text-align:center; background:#0f1a2a; border:1px solid var(--border); border-radius:12px; padding:12px}
  .num{font-size:1.6rem; font-weight:800}

  /* CAROUSEL (scroll-snap) */
  .snapwrap{overflow:auto; scroll-snap-type:x mandatory; display:flex; gap:12px; padding-bottom:6px; -webkit-overflow-scrolling: touch}
  .snap{flex: 0 0 84%; max-width:840px; aspect-ratio: 16/9; border-radius:16px; border:1px solid var(--border);
        background:#000 center/cover no-repeat; scroll-snap-align:center}
  .snap:nth-child(1){background-image:url("img/conjuro4.jpg")}
  .snap:nth-child(2){background-image:url("img/cine.jpeg")}
  .snap:nth-child(3){background-image:linear-gradient(0deg, rgba(0,0,0,.35), rgba(0,0,0,.35)), url("img/el-conjuro-4-trailer-1200x900.jpg")}
  .snap:nth-child(4){background-image:linear-gradient(0deg, rgba(0,0,0,.15), rgba(0,0,0,.15)), url("img/El-Conjuro-4.jpg")}
  .snapwrap::-webkit-scrollbar{height:10px} .snapwrap::-webkit-scrollbar-thumb{background:#2a3754; border-radius:999px}

  .waiting{margin-top:26px; text-align:center; font-size:1.08rem; color:#ffdbe1}
  .footer{text-align:center; padding:40px 16px 64px; color:#b7c0d8}

  /* Reveal on scroll */
  .reveal{opacity:0; transform:translateY(14px); transition:.7s ease}
  .reveal.visible{opacity:1; transform:none}

  /* ====== NUEVO: secci√≥n coraz√≥n ====== */
  .heart-section{text-align:center; margin-top:40px}
  #heartCanvas{max-width:100%; height:auto; display:block; margin:0 auto}

  /* ====== MOBILE / SMALL SCREENS ====== */
  @media (max-width: 900px){
    .grid{grid-template-columns: 1fr 1fr}
  }
  @media (max-width: 640px){
    .nav{padding:10px 12px}
    .hero{min-height:72vh}
    .hero::before{animation:none; /* evita mareo y ahorro de bater√≠a */}
    .tagline{font-size:0.95rem}
    .btn{width:100%; text-align:center}
    .count{grid-template-columns: repeat(2, minmax(100px,1fr))}
    .grid{grid-template-columns:1fr}
    .snap{flex:0 0 92%}
  }
  /* notch-safe padding */
  @supports (padding: max(0px)) {
    .container { padding-left: max(16px, env(safe-area-inset-left));
                 padding-right: max(16px, env(safe-area-inset-right)); }
  }
  /* Respeto a usuarios con "reducir movimiento" */
  @media (prefers-reduced-motion: reduce){
    *{animation: none !important; transition: none !important}
    .hero::before{animation:none}
  }
</style>
</head>
<body>
  <!-- Canvas de velitas -->
  <canvas id="fx" aria-hidden="true"></canvas>

  <header class="container">
    <nav class="nav">
      <a class="brand" href="#">üé¨ Nuestra cita</a>
      <small>El Conjuro 4 ‚Äî Last Rites</small>
    </nav>

    <section class="hero">
      <span class="vignette" aria-hidden="true"></span>
      <div class="hero-inner">
        <h1>Quiero invitarte a ver <span class="grad">El Conjuro 4</span> conmigo</h1>
        <p class="tagline"><strong>Estreno:</strong> viernes 5 de septiembre de 2025</p>
        <div class="glass">
          Tal vez no sea mucho, pero est√° hecho con todo mi coraz√≥n. Quiero que sepas que me gustas de verdad, y con este peque√±o detalle solo busco recordarte lo especial que eres para m√≠‚Ä¶ y de paso tener una excusa m√°s para estar cerquita de ti.
        </div>
        <div class="cta">
          <a class="btn" href="#detalles">Ver plan</a>
          <button class="btn fx-toggle" id="toggleFX" type="button" aria-pressed="false">Encender velitas ‚ú®</button>
          <a class="btn ghost" href="#galeria">Ver galer√≠a</a>
        </div>
      </div>
    </section>
  </header>

  <main class="container">
    <!-- Countdown -->
    <section class="reveal">
      <h2>Faltan‚Ä¶</h2>
      <div class="card">
        <div class="count">
          <div class="box"><div class="num" id="d">0</div>d√≠as</div>
          <div class="box"><div class="num" id="h">0</div>horas</div>
          <div class="box"><div class="num" id="m">0</div>min</div>
          <div class="box"><div class="num" id="s">0</div>seg</div>
        </div>
      </div>
    </section>

    <!-- Plan -->
    <section id="detalles" class="reveal">
      <h2>El plan</h2>
      <div class="grid">
        <div class="tile"><div class="content"><h3 style="margin:0 0 8px">üéüÔ∏è La peli</h3><p style="margin:0;color:var(--muted)">The Conjuring: Last Rites (El Conjuro 4). Yo llevo las entradas üòâ</p></div></div>
        <div class="tile"><div class="content"><h3 style="margin:0 0 8px">üç´ Despu√©s</h3><p style="margin:0;color:var(--muted)">Lo que te provoque. T√∫ decides.</p></div></div>
        <div class="tile"><div class="content"><h3 style="margin:0 0 8px">üìçDependiendo del d√≠a</h3><p style="margin:0;color:var(--muted)">Este plan me encargo yo üòâ.</p></div></div>
      </div>
    </section>

    <!-- Galer√≠a -->
    <section id="galeria" class="reveal">
      <h2>Un vistazo</h2>
      <div class="snapwrap" aria-label="galer√≠a">
        <div class="snap"></div>
        <div class="snap"></div>
        <div class="snap"></div>
        <div class="snap"></div>
        <div class="snap"></div>
      </div>
    </section>

    <div class="waiting reveal">
      Estar√© esperando tu respuesta con mucha ilusi√≥n üíå. Psdt: Te extra√±o
    </div>

    <!-- NUEVO: Coraz√≥n animado que se dibuja solo -->
    <section class="reveal heart-section">
      <h2>üíñ Para ti</h2>
      <canvas id="heartCanvas" width="320" height="280"></canvas>
    </section>
  </main>

  <footer class="container footer">
    <small>¬© <span id="year"></span> Hecho con mucho cari√±o. Sitio fan no oficial.</small>
  </footer>

<script>
  // A√±o
  document.getElementById('year').textContent = new Date().getFullYear();

  // Reveal on scroll
  const obs = new IntersectionObserver((es)=> es.forEach(e=>{
    if(e.isIntersecting){ e.target.classList.add('visible'); obs.unobserve(e.target); }
  }), {threshold:.15});
  document.querySelectorAll('.reveal').forEach(el=>obs.observe(el));

  // Countdown (ajusta hora si quieres)
  const target = new Date("2025-09-05T19:30:00");
  const $d = id('d'), $h = id('h'), $m = id('m'), $s = id('s');
  function tick(){
    const now = new Date(); let diff = Math.max(0, target - now);
    const d = Math.floor(diff/86400000); diff -= d*86400000;
    const h = Math.floor(diff/3600000);  diff -= h*3600000;
    const m = Math.floor(diff/60000);    diff -= m*60000;
    const s = Math.floor(diff/1000);
    $d.textContent=d; $h.textContent=h; $m.textContent=m; $s.textContent=s;
  }
  tick(); setInterval(tick, 1000);
  function id(x){return document.getElementById(x)}

  // ===== Velitas (fireflies) =====
  const canvas = document.getElementById('fx');
  const ctx = canvas.getContext('2d');
  let W=0,H=0, on=false, bugs=[];
  function resize(){ W=canvas.width=innerWidth; H=canvas.height=innerHeight }
  addEventListener('resize', resize); resize();

  function spawn(n){
    for(let i=0;i<n;i++){
      bugs.push({
        x: Math.random()*W,
        y: Math.random()*H*.6+H*.2,
        vx: (Math.random()-.5)*.4,
        vy: (Math.random()-.5)*.4,
        r: Math.random()*2+1,
        a: Math.random()*Math.PI*2
      });
    }
  }

  function loop(){
    ctx.clearRect(0,0,W,H);
    if(on){
      for(const b of bugs){
        b.a += 0.02;
        b.vx += Math.cos(b.a)*0.02;
        b.vy += Math.sin(b.a)*0.02;
        b.x += b.vx; b.y += b.vy;
        if(b.x<0||b.x>W) b.vx*=-1;
        if(b.y<0||b.y>H) b.vy*=-1;
        const g = ctx.createRadialGradient(b.x,b.y,0,b.x,b.y,b.r*6);
        g.addColorStop(0,'rgba(255,220,150,.9)');
        g.addColorStop(1,'rgba(255,220,150,0)');
        ctx.fillStyle=g; ctx.beginPath(); ctx.arc(b.x,b.y,b.r,0,Math.PI*2); ctx.fill();
      }
    }
    requestAnimationFrame(loop);
  }
  loop();

  const btnFX = document.getElementById('toggleFX');
  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  // apagadas por defecto; el usuario decide encenderlas
  btnFX.addEventListener('click', ()=>{
    on = !on && !prefersReduced; // si el usuario prefiere menos movimiento, no activamos
    btnFX.setAttribute('aria-pressed', on ? 'true' : 'false');
    btnFX.textContent = on ? 'Apagar velitas ‚ú®' : 'Encender velitas ‚ú®';
    if(on && bugs.length===0) spawn(90);
  });

  // ===== NUEVO: Coraz√≥n que se dibuja solo =====
  const heartCanvas = document.getElementById("heartCanvas");
  const hctx = heartCanvas.getContext("2d");
  hctx.strokeStyle = "#ff4d5b";
  hctx.lineWidth = 3;

  const points = [];
  for (let t = 0; t < Math.PI * 2; t += 0.05) {
    const x = 16 * Math.pow(Math.sin(t), 3);
    const y = 13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t);
    points.push({ x: x, y: -y });
  }

  let i2 = 0;
  function drawHeart() {
    if (i2 >= points.length) return;
    const { x, y } = points[i2];
    const scale = 10;
    const cx = 160, cy = 140;
    hctx.lineTo(cx + x * scale, cy + y * scale);
    hctx.stroke();
    i2++;
    requestAnimationFrame(drawHeart);
  }

  hctx.beginPath();
  hctx.moveTo(160, 140);
  drawHeart();
</script>
</body>
</html>
